<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
	"http://struts.apache.org/dtds/struts-2.5.dtd">
<struts>
	<include file="struts-default.xml"></include>
	<!-- 默认编码集 -->
	<constant name="struts.i18n.encoding" value="utf-8"></constant>
	<!-- 设置需要struts2处理的请求后缀 -->
	<!--<constant name="struts.action.extension" value="do,action"></constant> -->
	<!-- 设置浏览器是否缓存静态内容，开发阶段关闭，生产阶段打开 -->
	<constant name="struts.serve.static.browserCache" value="false"></constant>
	<!-- 配置文件被修改后，系统是否自动重新加载该文件，开发阶段打开 -->
	<constant name="struts.configuration.xml.reload" value="true"></constant>
	<!-- 开发模式下使用的，可以打印出更加详细的错误信息 -->
	<constant name="struts.devMode" value="true"></constant>
	<!-- 是否开启动态方法调用 -->
	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<!-- 设置全局文件上传大小限制为1GB，具体的限制可以通过在具体的action内解决 -->
	<constant name="struts.multipart.maxSize" value="1073741824"/>
	<package name="HandleInvalidAction" extends="struts-default">  
   		<default-action-ref name="notFound" />  
   		<action name="HandleInvalidAction">  
   			<result>/WEB-INF/content/404.jsp</result>  
  		</action>  
	</package>
	<package name="main" namespace="/" extends="struts-default">
		<!--该拦截器栈用于检测session是否合法-->
		<interceptors>  
            <interceptor name="loginInteceptor" class="com.istc.validation.SessionCheck" /><!--该拦截器栈用于检测session是否合法-->
            <interceptor-stack name="loginStack">
            	<interceptor-ref name="loginInteceptor"></interceptor-ref>  
            	<interceptor-ref name="defaultStack"></interceptor-ref>  
            </interceptor-stack>  
		</interceptors>
		<default-interceptor-ref name="loginStack"></default-interceptor-ref>
		<global-results>
			<result name="exit">/WEB-INF/content/timeout.jsp</result>
			<result name="error" type="redirect">error</result>
		</global-results>
		<!--开启通配符的使用，用于动态方法调用-->
		<global-exception-mappings>
            <exception-mapping exception="java.lang.Exception" result="error" />
        </global-exception-mappings>
	</package>
	<package name="needajax" extends="json-default">
		<interceptors>
            <interceptor-stack name="ajaxStack">
            	<interceptor-ref name="jsonValidationWorkflowStack"></interceptor-ref>
            	<interceptor-ref name="defaultStack"></interceptor-ref>  
            </interceptor-stack>  
		</interceptors>
		<default-interceptor-ref name="ajaxStack"></default-interceptor-ref>
    </package>
	<package name="logininterceptor" extends="struts-default">
		<global-allowed-methods>regex:.*</global-allowed-methods>
		<action name="*" class="com.istc.action.RedirectNotNeedCheckAction" method="{1}">
			<result name="{1}">/WEB-INF/content/{1}.jsp</result>
		</action>
	</package>
</struts>
